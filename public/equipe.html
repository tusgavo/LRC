<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Equipe</title>
    <link rel="stylesheet" href="./css/equipe.css" />
    <link rel="shortcut icon" href="./assets/images/logo.ico" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      crossorigin="anonymous"
    />
    <!--Import materialize.css-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <script
      src="https://kit.fontawesome.com/4e9705b432.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
  </head>

  <body>
    <header class="cabecalhoPrincipal">
      <div class="container">
        <h1 class="cabecalhoPrincipal-titulo">
          <a href="/"
            ><img src="./assets/images/logo.png" width="100px" alt=""
          /></a>
        </h1>

        <div class="cabecalhoPrincipal-nav">
          <a class="cabecalhoPrincipal-nav-link drop" href="/">Home</a>
          <a class="cabecalhoPrincipal-nav-link drop" href="/equipe">Equipe</a>
          <a class="cabecalhoPrincipal-nav-link drop" href="/atletas"
            >Atletas</a
          >
        </div>
        <i
          class="fas fa-sign-out-alt fa-2x"
          id="iconExit"
          onclick="logout()"
          style="color: #fff; cursor: pointer"
        ></i>
      </div>
      <center>
        <div class="dropdown">
          <button
            class="btn btn-secondary dropdown-toggle dropdownColor"
            type="button"
            id="dropdownMenuButton"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            Equipe
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="/">Home</a>
            <a class="dropdown-item" href="/equipe">Equipe</a>
            <a class="dropdown-item" href="/atletas">Atletas</a>
            <a class="dropdown-item" href="/login">Sair</a>
          </div>
        </div>
      </center>
    </header>

    <main>
      <!-- Modal criação -->
      <div class="container">
        <div class="alinhar">
          <button class="btn btn-primary">
            <a href="#modal-criacao" class="modal-trigger botaoAddEquipe">
              CRIAR EQUIPE
            </a>
          </button>
        </div>
        <div id="modal-criacao" class="modal container modalAdd">
          <center>
            <div class="modal-content">
              <div class="row">
                <form id="form-criacao" class="col s12">
                  <div class="row container teste">
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Nome da equipe"
                        id="cr-nomeEquipe"
                        name="nomeEquipe"
                        type="text"
                        class="validate"
                      />
                      <label for="nomeEquipe">Nome da equipe</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Nome do responsável"
                        id="cr-nome"
                        name="nome"
                        type="text"
                        class="validate"
                      />
                      <label for="nome">Nome do responsável</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Telefone do responsável"
                        id="cr-telResp"
                        name="telResp"
                        type="text"
                        class="validate"
                        maxlength="11"
                      />
                      <label for="telResp">Telefone do responsável</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Técnico"
                        id="cr-tecnico"
                        name="tecnico"
                        type="text"
                        class="validate"
                      />
                      <label for="tecnico">Técnico</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Auxíliar Técnico"
                        id="cr-auxTecnico"
                        name="auxTecnico"
                        type="text"
                        class="validate"
                      />
                      <label for="auxTecnico">Auxíliar técnico</label>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </center>
          <div class="modal-footer">
            <a
              onclick="criarEquipe()"
              href="#!"
              style="color: white"
              class="modal-close waves-effect waves-green btn-flat"
              >CRIAR EQUIPE</a
            >
          </div>
        </div>
      </div>

      <!-- Modal edição -->
      <center>
        <a href="" onclick="mostraModal()" class="modal-trigger editarEquipe"
          ><i
            class="fa fa-pencil"
            style="margin-right: 6px"
            aria-hidden="true"
          ></i
          >Editar equipe</a
        >

        <div id="modal-edicao" class="modal modalEdit">
          <center>
            <div class="modal-content">
              <div class="row">
                <form id="form-edicao" class="col s12">
                  <input type="hidden" name="id_equipe" id="ed-id_equipe">
                  <div class="row container teste">
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Nome da equipe"
                        id="ed-nomeEquipe"
                        name="nomeEquipe"
                        type="text"
                        class="validate"
                      />
                      <label for="nomeEquipe">Nome da equipe</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Nome do responsável"
                        id="ed-nome"
                        name="nome"
                        type="text"
                        class="validate"
                      />
                      <label for="nome">Nome do responsável</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Telefone do responsável"
                        id="ed-telResp"
                        name="telResp"
                        type="text"
                        class="validate"
                        maxlength="11"
                      />
                      <label for="telResp">Telefone do responsável</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Técnico"
                        id="ed-tecnico"
                        name="tecnico"
                        type="text"
                        class="validate"
                      />
                      <label for="tecnico">Técnico</label>
                    </div>
                    <div class="input-field col s12 inputAdd">
                      <input
                        placeholder="Auxíliar Técnico"
                        id="ed-auxTecnico"
                        name="auxTecnico"
                        type="text"
                        class="validate"
                      />
                      <label for="auxTecnico">Auxíliar técnico</label>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </center>
          <div class="modal-footer">
            <a
              onclick="editarEquipe()"
              href="#!"
              style="color: white"
              class="modal-close waves-effect waves-blue btn-flat"
              >EDITAR</a
            >
          </div>
        </div>
        <div class="dadosEquipe">
          <h1 class="tituloDadosPrin">Dados principais</h1>
          <!-- <img src="https://www.corinthians.com.br/assets/svg/corinthians.svg" width="100" alt=""> -->

          <h2 class="nomeTime">
            Corinthians
            <i
              class="fas fa-edit fa-sm"
              style="color: black; cursor: pointer"
            ></i>
          </h2>
          <div class="dadosPrin">
            <input
              type="text"
              id="nomeResp"
              class="inputDados"
              name=""
              placeholder="Nome do responsável:"
              id=""
            />
            <i
              id="iconNomeResp"
              class="fas iconEdit fa-edit fa-lg"
              style="font-size: 30px; color: black; margin-left: -100px"
            ></i>

            <input
              type="text"
              id="telResp"
              class="inputDados"
              name=""
              placeholder="Telefone do resposável:"
              id=""
            />
            <i
              id="iconTelResp"
              class="fas iconEdit fa-edit fa-lg"
              style="font-size: 30px; color: black; margin-left: -100px"
            ></i>

            <input
              type="text"
              id="email"
              class="inputDados"
              name=""
              placeholder="E-mail:"
              id=""
            />
            <i
              id="iconEmail"
              class="fas iconEdit fa-edit fa-lg"
              style="font-size: 30px; color: black; margin-left: -100px"
            ></i>
          </div>
          <hr />
          <div class="dadosTecnicos">
            <div class="container">
              <h1 class="tituloDadosTecn">Dados técnicos</h1>

              <input
                type="text"
                id="tecnico"
                class="inputDados"
                name=""
                placeholder="Técnico:"
                id=""
              />
              <i
                id="iconTecn"
                class="fas iconEdit fa-edit fa-lg"
                style="font-size: 30px; color: black; margin-left: -20px"
              ></i>

              <input
                type="text"
                id="auxTecn"
                class="inputDados"
                name=""
                placeholder="Auxíliar técnico"
                id=""
              />
              <i
                id="iconAuxTecn"
                class="fas iconEdit fa-edit fa-lg"
                style="font-size: 30px; color: black; margin-left: -20px"
              ></i>
            </div>
          </div>
        </div>
      </center>
    </main>
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
      let modalCriacao = null;
      let modalEdicao = null;
      document.addEventListener("DOMContentLoaded", function() {
        var elems = document.querySelectorAll(".modal");
        var instances = M.Modal.init(elems, {});
        modalEdicao = instances[0];
        modalCriacao = instances[1];
        modalDelecao = instances[2];
      });
    </script>
    <script>
      let listaDeEquipes = [];
      let tabela = document.getElementById("tabela");

      function mostraModal(i) {
        modalEdicao.open();
        document.getElementById("ed-id_equipe").value =
          listaDeEquipes[i].id_equipe;
        document.getElementById("ed-nomeEquipe").value =
          listaDeEquipes[i].nomeEquipe;
        document.getElementById("ed-telResp").value = listaDeEquipes[i].telResp;
        document.getElementById("ed-tecnico").value = listaDeEquipes[i].tecnico;
        document.getElementById("ed-auxTecnico").value =
          listaDeEquipes[i].auxTecnico;
      }
    </script>
    <script>
      function criarEquipe() {
        const formulario = document.getElementById("form-criacao");
        const data = new URLSearchParams(new FormData(formulario));
        fetch("/rotasEquipes", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: data
        });
        Swal.fire("Sucesso!", "Sua equipe foi criada!", "success");
        setTimeout(function() {
          window.location.reload();
        }, 1500);
      }
      function editarEquipe() {
        const formulario = document.getElementById("form-edicao");
        const data = new URLSearchParams(new FormData(formulario));
        fetch("/rotasEquipes", {
          method: "PUT",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: data
        });
        Swal.fire("Sucesso!", "Seu atleta foi editado!", "success");
        setTimeout(function() {
          window.location.reload();
        }, 1200);
      }
    </script>
  </body>
  <script src="./js/script.js"></script>
  <!-- <script src="./js/equipe.js"></script> -->
  <script
    src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
    crossorigin="anonymous"
  ></script>
</html>
